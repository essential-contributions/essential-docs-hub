import{d as h,p as u,v as y,q as S,a1 as $,P as L,o as I,c as k,r as p,e as E,j as b,K as C,F as B}from"./framework.TZSYhTdi.js";const j=h({__name:"vue-tweet",props:{tweetId:{type:String,default:""},tweetUrl:{type:String,default:""},conversation:{type:String,default:"all",validator:t=>["all","none"].includes(t)},cards:{type:String,default:"visible",validator:t=>["visible","hidden"].includes(t)},width:{type:[String,Number],default:"auto",validator:t=>typeof t=="string"?t==="auto":typeof t=="number"?t>=250&&t<=550:!1},align:{type:[String,void 0],default:void 0,validator:t=>["left","right","center",void 0].includes(t)},theme:{type:String,default:"light",validator:t=>["light","dark"].includes(t)},lang:{type:String,default:"en",validator:t=>["ar","bn","cs","da","de","el","en","es","fa","fi","fil","fr","he","hi","hu","id","it","ja","ko","msa","nl","no","pl","pt","ro","ru","sv","th","tr","uk","ur","vi","zh-cn","zh-tw"].includes(t)},dnt:{type:Boolean,default:!1}},emits:{"tweet-load-success":t=>!!t,"tweet-load-error":t=>t},setup(t,{emit:v}){const _=t,w=v,o=u(!0),d=u(!1),l=u();y(()=>{s()}),S($(_),s,{deep:!0});function s(){if(!(window.twttr&&window.twttr.ready)){g("https://platform.twitter.com/widgets.js",s);return}window.twttr.ready().then(({widgets:e})=>{if(o.value=!0,d.value=!1,l.value)l.value.innerHTML="";else{console.error("tweetContainerRef is null");return}const{tweetId:r,tweetOptions:i}=f();e.createTweet(r,l.value,i).then(async a=>{await L(),a?w("tweet-load-success",a):(d.value=!0,w("tweet-load-error",new Error("Failed to load tweet.")))}).finally(()=>{o.value=!1})}).catch(e=>{console.error("Error loading Twitter widget:",e),d.value=!0,o.value=!1})}function f(){var e;let{tweetId:r,tweetUrl:i,...a}=_,n=null;if(r&&i)n=new Error("Cannot provide both tweet-id and tweet-url.");else if(r)/^\d+$/.test(r)||(n=new Error("Invalid tweet-id, please provide a valid numerical tweet-id."));else if(i){const m=/^(https?:\/\/)?(www\.)?(twitter|x)\.com\/.*\/status(?:es)?\/(?<tweetId>[^/?]\d+)$/i,c=i.trim().match(m);c?r=(e=c.groups)==null?void 0:e.tweetId:n=new Error("Invalid tweet-url.")}else n=new Error("Must provide either tweet-id or tweet-url.");if(n)throw d.value=!0,o.value=!1,w("tweet-load-error",n),n;return{tweetId:r,tweetOptions:a}}function g(e,r){if(window.___$twitterScriptLoaded___===void 0&&(window.___$twitterScriptLoaded___=!1),window.___$twitterScriptLoaded___){r();return}if(window.___$twitterScriptLoading___===void 0&&(window.___$twitterScriptLoading___=!1),window.___$twitterScriptLoading___){const a=setInterval(()=>{window.___$twitterScriptLoaded___&&(clearInterval(a),r())},100);return}window.___$twitterScriptLoading___=!0;const i=document.createElement("script");i.setAttribute("src",e),i.async=!0,i.addEventListener("load",()=>{window.___$twitterScriptLoaded___=!0,window.___$twitterScriptLoading___=!1,r()},!1),document.body.appendChild(i)}return(e,r)=>(I(),k(B,null,[d.value?p(e.$slots,"error",{key:0}):o.value?p(e.$slots,"loading",{key:1}):E("",!0),b("div",C({ref_key:"tweetContainerRef",ref:l},e.$attrs),null,16)],64))}});export{j as B};
